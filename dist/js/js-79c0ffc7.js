!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},i={},s={},r={}.hasOwnProperty,o=/^\.\.?(\/|$)/,n=function(t,e){for(var i,s=[],r=(o.test(e)?t+"/"+e:e).split("/"),n=0,u=r.length;n<u;n++)i=r[n],".."===i?s.pop():"."!==i&&""!==i&&s.push(i);return s.join("/")},u=function(t){return t.split("/").slice(0,-1).join("/")},a=function(e){return function(i){var s=n(u(e),i);return t.require(s,e)}},l=function(t,e){var s=null;s=g&&g.createHot(t);var r={id:t,exports:{},hot:s};return i[t]=r,e(r.exports,a(t),r),r.exports},c=function(t){return s[t]?c(s[t]):t},d=function(t,e){return c(n(u(t),e))},m=function(t,s){null==s&&(s="/");var o=c(t);if(r.call(i,o))return i[o].exports;if(r.call(e,o))return l(o,e[o]);throw new Error("Cannot find module '"+t+"' from '"+s+"'")};m.alias=function(t,e){s[e]=t};var f=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/,v=function(t){if(f.test(t)){var e=t.replace(f,"");r.call(s,e)&&s[e].replace(f,"")!==e+"/index"||(s[e]=t)}if(h.test(t)){var i=t.replace(h,"");r.call(s,i)||(s[i]=t)}};m.register=m.define=function(t,s){if("object"==typeof t)for(var o in t)r.call(t,o)&&m.register(o,t[o]);else e[t]=s,delete i[t],v(t)},m.list=function(){var t=[];for(var i in e)r.call(e,i)&&t.push(i);return t};var g=t._hmr&&new t._hmr(d,m,e,i);m._cache=i,m.hmr=g&&g.wrap,m.brunch=!0,t.require=m}}(),function(){window;require.register("js/common.js",function(t,e,i){var s={init:function(){$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}},buildForm:function(t,e,i,s){var r="";e.forEach(function(e,i){if(void 0!==e.h)r+='<div class="uk-grid uk-grid-small uk-margin-top"><h3>'+e.h+"</h3></div>";else{e.r&&i>0&&(r+="</div>"),e.r&&(r+='<div class="uk-grid uk-grid-small">'),r+='<div class="'+e.c+'">',"required"===e.j._flags.presence&&(e.l="<strong>"+e.l+"*</strong>"),r+='<label for="" class="uk-form-label">'+e.l+"</label>";var s=t[e.n];void 0===s&&(s=""),"string"===e.t&&(r+='<input type="text" id="'+e.n+'" class="uk-width-1-1" name="'+e.n+'" value="'+s+'"><div data-hint="'+e.n+'" class="uk-text-danger"></div>'),"date"===e.t&&(r+='<div class="uk-form-icon uk-width-1-1"><i class="uk-icon-calendar"></i><input type="text" id="'+e.n+'" class="uk-width-1-1" name="'+e.n+'" data-uk-datepicker="{format:\'DD-MM-YYYY\'}" value="'+s+'"></div><div data-hint="'+e.n+'" class="uk-text-danger"></div>'),"text"===e.t&&(r+='<textarea id="'+e.n+'" class="uk-width-1-1" name="'+e.n+'">'+s+'</textarea><div data-hint="'+e.n+'" class="uk-text-danger"></div>'),"list"===e.t&&(r+='<select name="'+e.n+'" class="uk-width-1-1" id="'+e.n+'">',_.each(e.d,function(i){s="",t[e.n]===i[0]&&(s="selected='selected'"),r+='<option value="'+i[0]+'" '+s+">"+i[1]+"</option>"}),r+="</select>"),r+="</div>"}}),r+="</div>",r+='<hr><div class="uk-grid uk-grid-small uk-text-right"><div class="uk-width-1-1">',void 0!=s&&(r+='<a href="/#'+s+'" class="uk-button">Retour</a> '),r+='<button class="uk-button uk-button-success">Enregistrer</button></div></div><hr>',$(i).html(r),riot.update()},checkLogin:function(){$.get(url+"users/whoami",function(t){null===t.username&&riot.route("/login")})},checkUser:function(){$.get(url+"users/whoami",function(t){null===t.username&&riot.route("/login")})},saveForm:function(t,e,i){i=i||"",console.log(t);var s=JSON.stringify($("#"+t).serializeObject());$("div[data-hint]").html(""),$.get(url+e+"/check_form?data="+s,function(r){$("#"+t+" input, #"+t+" select").removeClass("uk-form-danger"),$("#"+t+" input, #"+t+" select").removeClass("uk-form-success"),$("#"+t+" input, #"+t+" select").addClass("uk-form-success"),r.errors.length>0?_.each(r.errors,function(t){$("#"+t.path).removeClass("uk-form-success"),$("#"+t.path).addClass("uk-form-danger"),$("div[data-hint="+t.path+"]").html("<div>"+t.message+"</div>")}):$.post(url+e+"/"+i,s,function(t){riot.route("/#"+e+"/"+t.key._key)}),setTimeout(function(){$("#"+t+" input, #"+t+" select").removeClass("uk-form-success")},300)})}};i.exports=s}),require.register("js/js.js",function(t,e,i){$(function(){riot.route("/login",function(t){riot.mount("div#app","login")}),riot.route("/logout",function(t){$.post(url+"users/logout",function(t){riot.route("/")})}),riot.route("/users",function(t){riot.mount("div#app","users")}),riot.route("/",function(t){riot.mount("div#app","loading")}),riot.route(function(t,e,i){void 0!=i&&"users"==t&&"edit"==i&&riot.mount("div#app","user_edit",{user_id:e})}),riot.route(function(t,e){void 0!=e&&"users"==t&&"new"==e&&riot.mount("div#app","user_new")}),console.log("Starting riot router"),riot.route.start(!0)})}),require.register("widgets/login.html.tag",function(t,e,i){riot.tag2("loading",'<div class="uk-text-center"> Loading app ... <i class="uk-icon-spinner uk-icon-spin"></i> </div>',"","",function(t){$.get(url+"users/whoami",function(t){null===t.username?riot.route("/login"):riot.route("/salaries")})}),riot.tag2("login",'<div class="uk-container uk-container-center"> <div class="uk-grid"> <div class="uk-width-3-10"></div> <div class="uk-width-4-10"> <div class="uk-margin-top uk-text-center"> <h2>Foxx - RiotJS</h2> <h3>Authentication</h3> <p> Please use demo@demo.com as login <br>and demo as password</p> </div> <form class="uk-form uk-margin-top" onsubmit="{save_form}"> <label for="" class="uk-form-label">Email</label> <div class="uk-form-controls"> <input type="text" placeholder="john@doe.com" class="uk-width-1-1" id="username" name="username" value="demo@demo.com"> </div> <label for="" class="uk-form-label">Password</label> <div class="uk-form-controls"> <input type="password" placeholder="********" class="uk-width-1-1" id="password" name="password" value="demo"> </div> <div class="uk-form-controls uk-margin-top"> <button type="submit" class="uk-width-1-1 uk-button">Connection</button> </div> </form> </div> <div class="uk-width-3-10"></div> </div> </div>',"","",function(t){this.save_form=function(t){$.post(url+"users/login",JSON.stringify({username:$("#username").val(),password:$("#password").val()}),function(t){t.success&&riot.route("/users")})}.bind(this)})}),require.register("widgets/users.html.tag",function(t,e,i){riot.tag2("user_edit",'<h3>Modifying a User</h3> <form onsubmit="{save_form}" class="uk-form" id="form_users"> </form>',"","",function(t){this.save_form=function(e){common.checkLogin(),common.saveForm("form_users","demousers",t.users_id)}.bind(this);var e=this;$.get(url+"demousers/"+t.users_id,function(t){e.users=t.data,common.buildForm(e.users,t.fields,"#form_users","demousers")})}),riot.tag2("user_new",'<h3>Creating a User</h3> <form onsubmit="{save_form}" class="uk-form" id="form_new_users"> </form>',"","",function(t){this.save_form=function(t){common.checkLogin(),common.saveForm("form_new_users","demousers")}.bind(this),$.get(url+"demousers/fields",function(t){common.buildForm({},t.fields,"#form_new_users","demousers")})}),riot.tag2("users",'<h3>Users\' List</h3> <p class="uk-alert uk-alert-warning">This is just a demo about using ArangoDB / Foxx within RiotJS - Nothing more - Just a CRUD sample</p> <a href="/#users/new" class="uk-button uk-button-mini"><i class="uk-icon-plus"></i> New User</a> <table class="uk-table "> <thead> <tr> <th>Email</th> <th>First Name</th> <th>Last Name</th> <th>Role</th> <th width="70"></th> </tr> </thead> <tbody> <tr each="{users}"> <td>{email}</td> <td>{fn}</td> <td>{ln}</td> <td>{role}</td> <td class="uk-text-center"> <a href="/#users/{_key}/edit" class="uk-button uk-button-primary uk-button-mini"><i class="uk-icon-edit"></i></a> <a onclick="{destroy_object}" class="uk-button uk-button-danger uk-button-mini"><i class="uk-icon-trash"></i></a> </td> </tr> </tbody> </table>',"","",function(t){var e=this;this.destroy_object=function(t){UIkit.modal.confirm("Are you sure?",function(){$.ajax({url:url+"users/"+t.item._key,method:"DELETE"}),$.get(url+"demousers/",function(t){e.users=t.data,e.update()})})}.bind(this),$.get(url+"users/whoami",function(t){null===t.username&&riot.route("/login")}),$.get(url+"demousers/",function(t){e.users=t.data,e.update()})})}),require.register("___globals___",function(t,e,i){})}(),require("___globals___");